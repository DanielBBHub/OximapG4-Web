<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>USUARIO</title>
    <link rel="stylesheet" type="text/css" href="src/app/css/usuario.css">
    <link rel="stylesheet" type="text/css" href="src/app/css/menu.css">
</head>

<body>
<div id="top"></div>
<section class="LandingPage" id="inicio">

    <!--------------------------------- ENCABEZADO ------------------------------------->
    <header class="encabezadousuario" id="encabezado_">
        <div class="divlogoHeader">
            <a class="item" href="usuario.html"><img class="logo" src="src/app/img/logoredondo.png" alt="Logo OXIMAP"></a>
        </div>

        <div class="headerLogin">
            <a class="item" href="index.html"><img class="login loginuser" src="src/app/img/cerrar-sesion.png" alt="login"></a>
        </div>

    </header>
    <!---------------------------------------------------------------------------------->

    <!--------------------------------- USUARIO ---------------------------------------->
    <div class="contenedorUsuario">
        <img class="imgUsuario" src="src/app/img/usuario.png">
        <h4 id="nombreUsuarioTxt" class="nombreUsuario">Antonio Hermano</h4>
        <a class="verPerfil" href="perfil.html">Ver perfil</a>

        <div class="contenedor">
            <h2 class="titulo">MIS ÚLTIMAS MUESTRAS</h2>
            <h5 class="texto" id="valorMuestraTxt">Valor de la base de datos</h5>
            <button id="boton_buscar_muestra" class="btnBD">RECOGER</button>
        </div>

    </div>

    <!---------------------------------------------------------------------------------->

    <!--------------------------------- FOOTER ----------------------------------------->
    <footer id="foter">
        <div class="contenedorFooter">
            <span class="copyright">OXIMAP © 2022</span>
        </div>

    </footer>
    <!---------------------------------------------------------------------------------->
</section>
  <script type="module">
// Import the functions you need from the SDKs you need
        import {initializeApp} from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
        import {getAuth, onAuthStateChanged} from "https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js";
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyBBGGWQJI519Xm8VM8Ocn0P9RSxdSK-s5I",
            authDomain: "oximapg4-login.firebaseapp.com",
            projectId: "oximapg4-login",
            storageBucket: "oximapg4-login.appspot.com",
            messagingSenderId: "905799197481",
            appId: "1:905799197481:web:e136730907ae07b3b90d38",
            measurementId: "G-KCP6LXPCH5"
        };


        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        // Initialize Firebase Authentication and get a reference to the service
        const auth = getAuth(app);
        import logicaFake from "./js/Logica_fake.js"
        import firebaseutil from "./js/firebase_util.js"
        document.onreadystatechange = function () {
            
            if(document.readyState == "complete")
            {
                const auth = getAuth();
                const user = auth.currentUser
                console.log(user)
                onAuthStateChanged(auth, (user) => {
                if (user) {
                    // User is signed in, see docs for a list of available properties
                    // https://firebase.google.com/docs/reference/js/firebase.User
                    document.getElementById("nombreUsuarioTxt").textContent = user.displayName
                    // ...
                } else {
                    // User is signed out
                    // ...
                }
                });
                let logica = new logicaFake()
                //Asignando la funcionalidad al boton de buscar muestra
                let boton_buscar_muestra = document.getElementById("boton_buscar_muestra")
                boton_buscar_muestra.addEventListener("click" , async function(){
                    var res = await logica.buscar_muestra()
                })
                
            
            }
            

        }
         
    </script>  
</body>


</html>